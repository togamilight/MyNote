# 第 1 章 CLR 的执行模型

## 1.1 将源代码编译成托管模块

编译器将支持 CLR 的语言所创建的源代码编译成**托管模块(managed module)**，托管模块是**可移植执行体(Portable Executable)**文件，32 位为 PE32，64 位为 PE32+，需要 CLR 才能执行

托管模块的组成部分：
* **PE32/32+ 头**：32+ 的只能在 64 位系统运行；标识了文件类型，包括 GUI, CUI, DLL；包含一个文件生成时间标记；如果该模块包含本机 CPU 代码，则该头还包含与本机 CPU 代码相关的信息
* **CLR头**：包含要求的 CLR 版本，一些标志(flag)，托管模块入口方法(main 方法)的 MethDef 元数据 token 以及模块的元数据、资源、强名称及其它不太重要数据项的位置/大小
* **元数据**：主要有两种元数据表，一种描述源代码中定义的类型和成员，一种描述源代码引用的类型和成员
* **IL 代码**：中间语言代码，由源代码编译而成，在运行时由 CLR 编译成本机 CPU 命令

* 托管程序集总是利用 Windows 的数据执行保护(Data Execution Prevention)和地址空间布局随机化(Address Space Layout Randomization)来增强安全性
